fragment MainMeta on Media {
    id
    idMal
    bannerImage
    type
    format
    isFavourite
    description
    genres
    status
    siteUrl
    meanScore
    averageScore
    startDate {
        year
        month
        day
    }
    title {
        english
        native
        romaji
        userPreferred
    }
    coverImage {
        medium
        large
        extraLarge
        color
    }
    mediaListEntry {
        id
        mediaId
        status
        score
        progress
        progressVolumes
        repeat
    }
}

fragment AnimeMeta on Media {
    ...MainMeta
    episodes
    nextAiringEpisode {
        id
        airingAt
        timeUntilAiring
        episode
        mediaId
    }
}

fragment MangaMeta on Media {
    ...MainMeta
    chapters
}

fragment NovelMeta on Media {
    ...MainMeta
    volumes
}

query AnimeTrending(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: ANIME
            isAdult: $isAdult
            onList: $onList
            sort: [TRENDING_DESC, POPULARITY_DESC]
            tag_not_in: $tag_not_in
        ) {
            ...AnimeMeta
        }
    }
}

query AnimePopular(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: ANIME
            isAdult: $isAdult
            onList: $onList
            sort: POPULARITY_DESC
            tag_not_in: $tag_not_in
        ) {
            ...AnimeMeta
        }
    }
}

query AnimeTopScored(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: ANIME
            isAdult: $isAdult
            onList: $onList
            sort: SCORE_DESC
            tag_not_in: $tag_not_in
        ) {
            ...AnimeMeta
        }
    }
}

query AnimeThisSeason(
    $page: Int
    $perPage: Int
    $season: MediaSeason
    $seasonYear: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: ANIME
            season: $season
            seasonYear: $seasonYear
            isAdult: $isAdult
            onList: $onList
            sort: SCORE_DESC
            tag_not_in: $tag_not_in
        ) {
            ...AnimeMeta
        }
    }
}

query AnimeNextSeason(
    $page: Int
    $perPage: Int
    $season: MediaSeason
    $seasonYear: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: ANIME
            season: $season
            seasonYear: $seasonYear
            isAdult: $isAdult
            onList: $onList
            sort: TRENDING_DESC
            tag_not_in: $tag_not_in
        ) {
            ...AnimeMeta
        }
    }
}

query MangaTrending(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            countryOfOrigin: JP
            isAdult: $isAdult
            onList: $onList
            sort: [TRENDING_DESC, POPULARITY_DESC]
            tag_not_in: $tag_not_in
            format_not_in: NOVEL
        ) {
            ...MangaMeta
        }
    }
}

query MangaPopular(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            countryOfOrigin: JP
            isAdult: $isAdult
            onList: $onList
            sort: POPULARITY_DESC
            tag_not_in: $tag_not_in
            format_not_in: NOVEL
        ) {
            ...MangaMeta
        }
    }
}

query MangaTopScored(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            countryOfOrigin: JP
            isAdult: $isAdult
            onList: $onList
            sort: SCORE_DESC
            tag_not_in: $tag_not_in
            format_not_in: NOVEL
        ) {
            ...MangaMeta
        }
    }
}

query ManhwaTrending(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            countryOfOrigin: KR
            isAdult: $isAdult
            onList: $onList
            sort: [TRENDING_DESC, POPULARITY_DESC]
            tag_not_in: $tag_not_in
        ) {
            ...MangaMeta
        }
    }
}

query ManhwaPopular(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            countryOfOrigin: KR
            isAdult: $isAdult
            onList: $onList
            sort: POPULARITY_DESC
            tag_not_in: $tag_not_in
        ) {
            ...MangaMeta
        }
    }
}

query ManhwaTopScored(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            countryOfOrigin: KR
            isAdult: $isAdult
            onList: $onList
            sort: SCORE_DESC
            tag_not_in: $tag_not_in
        ) {
            ...MangaMeta
        }
    }
}

query ManhuaTrending(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            countryOfOrigin: CN
            isAdult: $isAdult
            onList: $onList
            sort: [TRENDING_DESC, POPULARITY_DESC]
            tag_not_in: $tag_not_in
        ) {
            ...MangaMeta
        }
    }
}

query ManhuaPopular(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            countryOfOrigin: CN
            isAdult: $isAdult
            onList: $onList
            sort: POPULARITY_DESC
            tag_not_in: $tag_not_in
        ) {
            ...MangaMeta
        }
    }
}

query ManhuaTopScored(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            countryOfOrigin: CN
            isAdult: $isAdult
            onList: $onList
            sort: SCORE_DESC
            tag_not_in: $tag_not_in
        ) {
            ...MangaMeta
        }
    }
}

query NovelTrending(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            isAdult: $isAdult
            onList: $onList
            sort: [TRENDING_DESC, POPULARITY_DESC]
            format: NOVEL
            tag_not_in: $tag_not_in
        ) {
            ...NovelMeta
        }
    }
}

query NovelPopular(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            isAdult: $isAdult
            onList: $onList
            sort: POPULARITY_DESC
            format: NOVEL
            tag_not_in: $tag_not_in
        ) {
            ...NovelMeta
        }
    }
}

query NovelTopScored(
    $page: Int
    $perPage: Int
    $onList: Boolean
    $isAdult: Boolean
    $tag_not_in: [String]
) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            hasNextPage
            currentPage
            total
        }
        media(
            type: MANGA
            isAdult: $isAdult
            onList: $onList
            sort: SCORE_DESC
            format: NOVEL
            tag_not_in: $tag_not_in
        ) {
            ...NovelMeta
        }
    }
}

query Recommendations($page: Int, $perPage: Int, $sort: [RecommendationSort], $onList: Boolean) {
    Page(page: $page, perPage: $perPage) {
        pageInfo {
            currentPage
            hasNextPage
        }
        recommendations(sort: $sort, onList: $onList) {
            id
            rating
            userRating
            media {
                id
                idMal
                type
                bannerImage
                isAdult
                title {
                    userPreferred
                    romaji
                    native
                    english
                }
                coverImage {
                    color
                    extraLarge
                }
                meanScore
                averageScore
            }
            mediaRecommendation {
                id
                idMal
                type
                bannerImage
                title {
                    userPreferred
                    romaji
                    native
                    english
                }
                coverImage {
                    color
                    extraLarge
                }
                meanScore
                averageScore
            }
            user {
                id
                name
                bannerImage
                about
                createdAt
                options {
                    profileColor
                }
                avatar {
                    large
                }
                favourites {
                    anime(perPage: 1) {
                        nodes {
                            id
                            title {
                                userPreferred
                            }
                            coverImage {
                                color
                                extraLarge
                            }
                            siteUrl
                        }
                    }
                    manga(perPage: 1) {
                        nodes {
                            id
                            title {
                                userPreferred
                            }
                            coverImage {
                                color
                                extraLarge
                            }
                            siteUrl
                        }
                    }
                    characters(perPage: 1) {
                        nodes {
                            id
                            name {
                                userPreferred
                            }
                            image {
                                large
                            }
                            gender
                            siteUrl
                        }
                    }
                }
                siteUrl
            }
        }
    }
}

query GenreTagCollection {
    GenreCollection
    MediaTagCollection {
        id
        name
        description
        category
        rank
        isGeneralSpoiler
        isMediaSpoiler
        isAdult
    }
}
